{"remainingRequest":"D:\\Cbes\\SICREM\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Cbes\\SICREM\\src\\components\\views\\user\\internals\\Create.vue?vue&type=style&index=0&id=6678d6f8&lang=scss&scoped=true&","dependencies":[{"path":"D:\\Cbes\\SICREM\\src\\components\\views\\user\\internals\\Create.vue","mtime":1643115623522},{"path":"D:\\Cbes\\SICREM\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Cbes\\SICREM\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Cbes\\SICREM\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Cbes\\SICREM\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Cbes\\SICREM\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Cbes\\SICREM\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQojY3JhdGUtdXNlci1jb21wb25lbnQtY29udGVudCB7DQoJd2lkdGg6IDEwMCU7DQoJaGVpZ2h0OiAxMDAlOw0KCWRpc3BsYXk6IGZsZXg7DQoJanVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQoJLmZvcm0tY29udGFpbmVyIHsNCgkJLmZvcm0tZ3JvdXAgew0KCQkJJi5zd2l0aC1jb250ZW50IHsNCgkJCQlsYWJlbCB7DQoJCQkJCSY6Zmlyc3Qtb2YtdHlwZSB7DQoJCQkJCQltaW4td2lkdGg6IDIwMHB4Ow0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQkJJi5idXR0b24gew0KCQkJCXBhZGRpbmc6IDA7DQoJCQkJZGlzcGxheTogaW5saW5lLWZsZXg7DQoJCQkJYWxpZ24taXRlbXM6IGZsZXgtZW5kOw0KCQkJCS5idXR0b24tY29udGFpbmVyIHsNCgkJCQkJd2lkdGg6IDEwMCU7DQoJCQkJCWhlaWdodDogNTBweDsNCgkJCQkJZGlzcGxheTogZmxleDsNCgkJCQkJYWxpZ24taXRlbXM6IGNlbnRlcjsNCgkJCQkJY29sdW1uLWdhcDogMTBweDsNCgkJCQkJYnV0dG9uIHsNCgkJCQkJCWJhY2tncm91bmQtY29sb3I6ICRidG4tc2Vjb25kYXJ5LWNvbG9yOw0KCQkJCQkJYm9yZGVyOiBub25lOw0KCQkJCQkJJjpob3ZlciB7DQoJCQkJCQkJYmFja2dyb3VuZC1jb2xvcjogJGJ0bi1zZWNvbmRhcnktY29sb3ItaG92ZXI7DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQkJc3BhbiB7DQoJCQkJCQl0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOw0KCQkJCQkJZm9udC1zaXplOiAkZm9udC1zaXplLXNtYWxsOw0KCQkJCQkJZm9udC1zdHlsZTogaXRhbGljOw0KCQkJCQkJY29sb3I6ICRkYW5nZXItY29sb3I7DQoJCQkJCX0NCgkJCQl9DQoJCQkJLmVycm9yLW1lc3NhZ2VzIHsNCgkJCQkJc3BhbiB7DQoJCQkJCQlmb250LXNpemU6ICRmb250LXNpemUtc21hbGw7DQoJCQkJCQljb2xvcjogJGRhbmdlci1jb2xvcjsNCgkJCQkJfQ0KCQkJCX0NCgkJCX0NCgkJfQ0KCX0NCn0NCg=="},{"version":3,"sources":["Create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Create.vue","sourceRoot":"src/components/views/user/internals","sourcesContent":["<template>\r\n\t<div id=\"crate-user-component-content\">\r\n\t\t<div class=\"form-container\">\r\n\t\t\t<form novalidate=\"true\" class=\"register\" @submit.prevent=\"save\">\r\n\t\t\t\t<form-box>\r\n\t\t\t\t\t<template slot=\"header\">\r\n\t\t\t\t\t\t{{ `Dados do ${loggedAsAdmin ? 'usuário' : 'cliente'}` }}\r\n\t\t\t\t\t</template>\r\n\r\n\t\t\t\t\t<template slot=\"content\">\r\n\t\t\t\t\t\t<div class=\"form-row\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tv-if=\"loggedAsAdmin\"\r\n\t\t\t\t\t\t\t\tid=\"user-perfil-container\"\r\n\t\t\t\t\t\t\t\tclass=\"form-group col-md-4 select-container\"\r\n\t\t\t\t\t\t\t\t:class=\"{ 'invalid-field': $v.level.$error }\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<label for=\"user-perfilcontainer\">Perfil</label>\r\n\t\t\t\t\t\t\t\t<v-select\r\n\t\t\t\t\t\t\t\t\tv-model=\"level\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Selecione o perfil\"\r\n\t\t\t\t\t\t\t\t\ttrack-by=\"name\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"name\"\r\n\t\t\t\t\t\t\t\t\t:clearable=\"false\"\r\n\t\t\t\t\t\t\t\t\t:options=\"levels\"\r\n\t\t\t\t\t\t\t\t\t:reduce=\"level => level.value\"\r\n\t\t\t\t\t\t\t\t\t@search:blur=\";[$v.level.$touch()]\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<template #no-options=\"{ searching }\">\r\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"searching\" class=\"info-messages\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"not-found-message\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>Perfil não encontrado</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t</v-select>\r\n\t\t\t\t\t\t\t\t<div v-if=\"$v.level.$error\" class=\"error-messages\">\r\n\t\t\t\t\t\t\t\t\t<span v-if=\"!$v.level.required\">O campo é obrigatório</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"form-group col-md-8\"\r\n\t\t\t\t\t\t\t\t:class=\"{ 'invalid-field': $v.name.$error }\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<label for=\"name\">Nome</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\t\t\t\tv-model=\"name\"\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tclass=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Nome do cliente\"\r\n\t\t\t\t\t\t\t\t\t@blur=\"$v.name.$touch()\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div v-if=\"$v.name.$error\" class=\"error-messages\">\r\n\t\t\t\t\t\t\t\t\t<span v-if=\"!$v.name.required\">O campo é obrigatório</span>\r\n\t\t\t\t\t\t\t\t\t<span v-if=\"!$v.name.minLength\">\r\n\t\t\t\t\t\t\t\t\t\tDeve ter no minimo\r\n\t\t\t\t\t\t\t\t\t\t{{ $v.name.$params.minLength.min }} caracteres\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"form-group col-md-6\"\r\n\t\t\t\t\t\t\t\t:class=\"{ 'invalid-field': $v.email.$error }\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<label for=\"email\">E-mail</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\t\t\tv-model=\"email\"\r\n\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\tclass=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Email utilizado para entrar no sistema\"\r\n\t\t\t\t\t\t\t\t\t@blur=\"$v.email.$touch()\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div v-if=\"$v.email.$error\" class=\"error-messages\">\r\n\t\t\t\t\t\t\t\t\t<span v-if=\"!$v.email.email\">Formato inválido</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</form-box>\r\n\r\n\t\t\t\t<div class=\"form-row actions\">\r\n\t\t\t\t\t<button type=\"button\" class=\"btn-custom tertiary\" @click=\"back\">\r\n\t\t\t\t\t\t<i class=\"fas fa-arrow-left\"></i>\r\n\t\t\t\t\t\tVOLTAR\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclass=\"btn-custom primary\"\r\n\t\t\t\t\t\t:disabled=\"disableSave\"\r\n\t\t\t\t\t\t@click.stop.prevent=\"save()\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCadastrar\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex'\r\nimport { users } from '@/services/users'\r\nimport FormBox from '@/components/shared/FormBox'\r\nimport clientValidation from '@/mixins/validations/client.js'\r\nimport notification from '@/mixins/notificationsMixin.js'\r\nimport authorize from '@/mixins/authorizeMixin.js'\r\nimport { ROLES } from '@/helpers/roles'\r\n\r\nexport default {\r\n\tname: 'CreateInternalUser',\r\n\tcomponents: {\r\n\t\tFormBox\r\n\t},\r\n\tmixins: [clientValidation, notification, authorize],\r\n\tbeforeRouteEnter(to, from, next) {\r\n\t\tnext(vm => {\r\n\t\t\tvm.path = from.path\r\n\t\t})\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tvalidate: false,\r\n\t\t\tsubmitted: true,\r\n\t\t\tloadingSubmit: true,\r\n\t\t\tactive: true,\r\n\t\t\tisScuba: false\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState({\r\n\t\t\tclient: state => state.clients.client,\r\n\t\t\tlevels: state => state.levels.levels.filter(c => c.value !== '2')\r\n\t\t}),\r\n\t\tname: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.client.name\r\n\t\t\t},\r\n\t\t\tset(value) {\r\n\t\t\t\tthis.setClientField({ value, field: 'name' })\r\n\t\t\t}\r\n\t\t},\r\n\t\temail: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.client.email\r\n\t\t\t},\r\n\t\t\tset(value) {\r\n\t\t\t\tthis.setClientField({ value, field: 'email' })\r\n\t\t\t}\r\n\t\t},\r\n\t\tlevel: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.client.level\r\n\t\t\t},\r\n\t\t\tset(value) {\r\n\t\t\t\tthis.setClientField({ value, field: 'level' })\r\n\t\t\t}\r\n\t\t},\r\n\t\tdisableSave: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.$v.$error\r\n\t\t\t}\r\n\t\t},\r\n\t\tloggedAsAdmin: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.isAdmin()\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tasync created() {\r\n\t\tconst { id } = this.$route.params\r\n\t\tif (!this.levels.length) await this.laodAllLevels()\r\n\t\tif (id) await this.laodUserToEdit(id)\r\n\t},\r\n\tdestroyed() {\r\n\t\tthis.resetClientState()\r\n\t},\r\n\tmethods: {\r\n\t\tback() {\r\n\t\t\tthis.$router.back({ redirect: '/' })\r\n\t\t},\r\n\r\n\t\t...mapActions([\r\n\t\t\t'setClientField',\r\n\t\t\t'laodAllLevels',\r\n\t\t\t'laodUserToEdit',\r\n\t\t\t'resetClientState'\r\n\t\t]),\r\n\t\tasync save() {\r\n\t\t\tif (!this.isAdmin())\r\n\t\t\t\tthis.setClientField({ value: ROLES.client, field: 'level' })\r\n\t\t\tthis.submitted = true\r\n\t\t\tthis.loadingSubmit = true\r\n\t\t\tthis.$v.$touch()\r\n\t\t\tif (!this.$v.$error) {\r\n\t\t\t\tconst client = this.client\r\n\t\t\t\tclient.active =\r\n\t\t\t\t\tclient.active !== undefined ? client.active : this.active\r\n\t\t\t\tdelete client.clientId\r\n\t\t\t\tif (this.$route.params.id) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst resp = await users.update(client.id, { client })\r\n\t\t\t\t\t\tthis.apiResponseNotification(200, resp)\r\n\t\t\t\t\t\tthis.$router.push({ name: 'usersList' })\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tthis.form.perfil = this.perfis.find(p => p.id === this.form.perfil)\r\n\t\t\t\t\t\tthis.loadingSubmit = false\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst client = this.client\r\n\t\t\t\t\t\tconst resp = await users.create({ client })\r\n\t\t\t\t\t\tthis.apiResponseNotification(201, resp)\r\n\t\t\t\t\t\tthis.$router.push({ name: 'usersList' })\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tthis.loadingSubmit = false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.loadingSubmit = false\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#crate-user-component-content {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\t.form-container {\r\n\t\t.form-group {\r\n\t\t\t&.swith-content {\r\n\t\t\t\tlabel {\r\n\t\t\t\t\t&:first-of-type {\r\n\t\t\t\t\t\tmin-width: 200px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t&.button {\r\n\t\t\t\tpadding: 0;\r\n\t\t\t\tdisplay: inline-flex;\r\n\t\t\t\talign-items: flex-end;\r\n\t\t\t\t.button-container {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 50px;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tcolumn-gap: 10px;\r\n\t\t\t\t\tbutton {\r\n\t\t\t\t\t\tbackground-color: $btn-secondary-color;\r\n\t\t\t\t\t\tborder: none;\r\n\t\t\t\t\t\t&:hover {\r\n\t\t\t\t\t\t\tbackground-color: $btn-secondary-color-hover;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tspan {\r\n\t\t\t\t\t\ttext-transform: uppercase;\r\n\t\t\t\t\t\tfont-size: $font-size-small;\r\n\t\t\t\t\t\tfont-style: italic;\r\n\t\t\t\t\t\tcolor: $danger-color;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.error-messages {\r\n\t\t\t\t\tspan {\r\n\t\t\t\t\t\tfont-size: $font-size-small;\r\n\t\t\t\t\t\tcolor: $danger-color;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"]}]}